<div class="app-shell">
  <header class="top-bar">
    <div class="brand">
      <div class="logo-dot"></div>
      <div>
        <p class="eyebrow">Playlist</p>
        <h1>MusicApp</h1>
      </div>
    </div>
    <div class="filters">
      <div class="search">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path
            d="M10.5 3a7.5 7.5 0 1 1 4.82 13.26l3.21 3.21-1.42 1.42-3.21-3.21A7.5 7.5 0 0 1 10.5 3Zm0 2a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11Z" />
        </svg>
        <input type="search" placeholder="Search by title, artist, album" [value]="search()"
          (input)="updateSearch($event)" />
      </div>
      <div class="pill-group">
        @for (mood of moods; track mood) {
        <button type="button" class="pill" [class.active]="moodFilter() === mood" (click)="setMood(mood)">
          {{ mood }}
        </button>
        }
      </div>
    </div>
  </header>

  <main class="layout">
    <section class="now-playing">
      <p class="eyebrow">Now playing</p>
      <h2>{{ selected().title }}</h2>
      <p class="meta">{{ selected().artist }} - {{ selected().album }}</p>
      <div class="controls">
        <button type="button" (click)="toggleLike(selected().id)" [class.ghost]="!selected().liked">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path
              d="M12.1 8.64 12 8.77l-.1-.13C10.14 6.6 7.1 6.24 5.05 8.28c-2.06 2.04-2.06 5.36 0 7.4l6.23 6.23c.4.4 1.05.4 1.45 0l6.23-6.23c2.06-2.04 2.06-5.36 0-7.4-2.05-2.04-5.09-1.68-6.86.36Z" />
          </svg>
          {{ selected().liked ? 'Liked' : 'Like' }}
        </button>
        <button type="button" class="primary">Play</button>
      </div>
      <div class="queue">
        <p class="eyebrow">Up next</p>
        @if (queue().length === 0) {
        <p class="empty">No matches yet.</p>
        } @else {
        <ul>
          @for (song of queue(); track song.id) {
          <li>
            <div>
              <p class="title">{{ song.title }}</p>
              <p class="meta">{{ song.artist }} - {{ song.album }}</p>
            </div>
            <span class="length">{{ song.length }}</span>
          </li>
          }
        </ul>
        }
      </div>
    </section>

    <section class="tracks">
      <div class="list-head">
        <p class="eyebrow">Library</p>
        <span class="count">{{ filteredSongs().length }} tracks</span>
      </div>
      <div class="table" role="list">
        @for (song of filteredSongs(); track song.id) {
        <button type="button" class="row" role="listitem" [class.active]="selected().id === song.id"
          (click)="selectSong(song)">
          <div class="details">
            <p class="title">{{ song.title }}</p>
            <p class="meta">{{ song.artist }} - {{ song.album }}</p>
          </div>
          <div class="tags">
            <span class="pill small">{{ song.mood }}</span>
            <span class="length">{{ song.length }}</span>
            <button type="button" class="icon" aria-label="Like"
              (click)="$event.stopPropagation(); toggleLike(song.id)">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path [attr.fill]="song.liked ? 'currentColor' : 'none'"
                  [attr.stroke]="song.liked ? 'currentColor' : 'currentColor'"
                  [attr.stroke-width]="song.liked ? 0 : 1.5"
                  d="M12.1 8.64 12 8.77l-.1-.13C10.14 6.6 7.1 6.24 5.05 8.28c-2.06 2.04-2.06 5.36 0 7.4l6.23 6.23c.4.4 1.05.4 1.45 0l6.23-6.23c2.06-2.04 2.06-5.36 0-7.4-2.05-2.04-5.09-1.68-6.86.36Z" />
              </svg>
            </button>
          </div>
        </button>
        }
      </div>
    </section>
  </main>
</div>